pre-commit:
  parallel: true
  commands:
    fmt:
      glob: "*.rs"
      run: cargo fmt --all
      stage_fixed: true

    clippy:
      glob: "*.rs"
      run: cargo clippy --all-targets --all-features -- -W clippy::pedantic -W clippy::nursery

    toml-fmt:
      glob: "*.toml"
      run: taplo format {staged_files}
      stage_fixed: true

    typos:
      glob: "*.{rs,md,txt,toml,yml,yaml}"
      run: typos {staged_files}

    test:
      glob: "*.rs"
      run: cargo test

# pre-push:
#   commands:
#     test-all:
#       run: cargo test --release

#     check-docs:
#       run: cargo doc --no-deps --all-features

# Skip lefthook installation on CI
skip_output:
  - meta
  - execution
